<!DOCTYPE html>
<html layout:decorate="~{layout/layout}" xmlns:layout="http://www.w3.org/1999/xhtml" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<div layout:fragment="content" class="container my-3">
    <form th:action="@{/user/findPassword}" name="emailForm" method="post">
        <div th:if="${param.error}">
            <div class="alert alert-danger">
                유효한 이메일이 아닙니다.
            </div>
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">이메일</label>
            <input id="email" name="email" class="form-control">
        </div>
        <button type="submit" class="btn btn-primary">인증 메일 보내기</button>
    </form>
</div>
<script>
    const $email = document.querySelector("#email");
    const $form = document.emailForm;
    const regex = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
    $form.addEventListener('submit', function (e) {
        if (regex.test($email.value)) {
            $form.submit();
        }
        $email.classList.add('errorEmail');
        return false;
    })

</script>

</body>
</html>